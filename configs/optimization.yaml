optimization:
  study_name: "flair-2-hyperparam-search"
  n_trials: 10
  n_epochs: 2  # Override epochs for optimization trials
  direction: "minimize"
  
  search_space:
    - name: "training.optimizer.learning_rate"
      type: "float"
      low: 1.0e-5
      high: 1.0e-2
      log: true
    
    - name: "training.optimizer.weight_decay"
      type: "float"
      low: 1.0e-6
      high: 1.0e-3
      log: true
      
    - name: "model.encoder_name"
      type: "categorical"
      choices: 
        - "mit_b0"
        - "mit_b1"
        - "resnet18"

    - name: "model.stochastic_depth"
      type: "float"
      low: 0.0
      high: 0.5

    - name: "data.data_augmentation.augmentations.hflip.prob"
      type: "float"
      low: 0.0
      high: 1.0

    - name: "data.data_augmentation.augmentations.vflip.prob"
      type: "float"
      low: 0.0
      high: 1.0

    - name: "data.data_augmentation.augmentations.rotation.prob"
      type: "float"
      low: 0.0
      high: 1.0

    - name: "data.data_augmentation.augmentations.contrast.prob"
      type: "float"
      low: 0.0
      high: 1.0

    - name: "data.data_augmentation.augmentations.brightness.prob"
      type: "float"
      low: 0.0
      high: 1.0

    - name: "data.data_augmentation.augmentations.chessmix.prob"
      type: "float"
      low: 0.0
      high: 1.0

  # Model-specific search spaces (only applied when model.model_type matches)
  # Parameters are placed under model.model_config.* to be forwarded to the model builder
  model_specific_search_space:
    # SMP Unet parameters
    unet:
      - name: "model.model_config.decoder_channels"
        type: "categorical"
        choices:
          - [256, 128, 64, 32, 16]
          - [128, 64, 32, 16, 8]
          - [512, 256, 128, 64, 32]
      - name: "model.model_config.decoder_attention_type"
        type: "categorical"
        choices:
          - null
          - "scse"

    # SMP Segformer parameters
    segformer:
      - name: "model.model_config.decoder_segmentation_channels"
        type: "int"
        low: 128
        high: 512

    # SMP DeepLabV3Plus parameters
    deeplabv3plus:
      - name: "model.model_config.decoder_channels"
        type: "int"
        low: 128
        high: 512

    # UNetFormer parameters (custom model)
    unetformer:
      - name: "model.model_config.decode_channels"
        type: "int"
        low: 32
        high: 128
      - name: "model.model_config.dropout"
        type: "float"
        low: 0.0
        high: 0.5
      - name: "model.model_config.window_size"
        type: "categorical"
        choices:
          - 4
          - 8
          - 16

    # RS3Mamba parameters (custom model)
    rs3mamba:
      - name: "model.model_config.decode_channels"
        type: "int"
        low: 32
        high: 128
      - name: "model.model_config.dropout"
        type: "float"
        low: 0.0
        high: 0.5
      - name: "model.model_config.window_size"
        type: "categorical"
        choices:
          - 4
          - 8
          - 16
